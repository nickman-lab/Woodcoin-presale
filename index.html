
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WOODCOIN Pre-Sale</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body {
      background: #000;
      color: #f1c40f;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px 20px;
    }
    button {
      margin-top: 20px;
      padding: 15px 25px;
      background: #2980b9;
      color: #fff;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .wallet-status, .warning, .timer, .message {
      margin-top: 20px;
      font-size: 16px;
    }
    .progress-container {
      margin-top: 30px;
      width: 80%;
      background-color: #333;
      border-radius: 10px;
      margin-left: auto;
      margin-right: auto;
      height: 25px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background-color: #27ae60;
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    .note {
      font-size: 14px;
      margin-top: 5px;
      color: #ccc;
    }
    a {
      color: #ccc;
    }
  </style>
</head>
<body>
  <h1>üî• WOODCOIN Pre-Sale</h1>
  <p style="margin-top: 10px; color: #ffd700; font-size: 16px;">
    WOODCOIN is a Play-to-Earn token that fuels the WOOD ecosystem.<br>
    Earn it. Use it. Burn it. üî•
  </p>

  <h2>Buy now: 50,000 WOOD per 1 BNB</h2>

  
    <div class="timer" id="countdown">‚è≥ Loading timer...</div>
    
        
<div id="woodInfo" style="margin-top: 5px; font-size: 14px; color: #ccc;">
  ü™ô WOOD Distributed: -- WOOD<br>
  üíµ 1 WOOD = $0.005
</div>

    <div id="bnbValue" style="margin-top: 5px; font-size: 14px; color: #ccc;">‚âà -- USD raised</div>
        <div id="bnbPrice"
         style="margin-top: 10px; font-size: 15px; color: #fff;">BNB Price: $--</div>
    <script>
      async function getBNBPrice() {
        try {
          const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd");
          const data = await res.json();
          const price = data.binancecoin.usd;
          
        
document.getElementById("bnbPrice").innerText = "BNB Price: $" + price.toFixed(2);

try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";
  } else {
    
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

  }
} catch (e) {
  
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

}

        try {
          const raisedText = document.getElementById("bnbRaisedText").innerText;
          const raisedBNB = parseFloat(raisedText.split(":")[1]);
          const usdValue = (raisedBNB * price).toFixed(2);
          document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";
        } catch (e) {
          
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

        }
        
        } catch (err) {
          console.error("CoinGecko API error:", err);
        }
      }
      getBNBPrice();
      setInterval(getBNBPrice, 30000); // actualizeazƒÉ la 30 secunde
    </script>
    

  <div class="wallet-status" id="walletAddress">Wallet: Not connected</div>
  <button onclick="connectWallet()">Connect Wallet</button>
  <br/>
  <button onclick="addToken()">Add WOODCOIN to Wallet</button>
  <button onclick="buyWoodcoin()">Buy Now</button>

  <div class="message" id="statusMsg"></div>
  <div class="warning" id="warningMsg" style="color:red;"></div>

  <div id="progressSection">
    <p id="bnbRaisedText">üí∞ Raised: -- / 100 BNB</p>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="note">Live balance from BSC Mainnet</div>
    <p class="note">
      Sale Contract:
      <a href="https://bscscan.com/address/0x7cebc99b114138152D54589BaF6a386b5435f4d0" target="_blank">
        0x7ceb...f4d0
      </a>
    </p>
  </div>

  <section style="margin-top: 40px;">
    <h3 style="color: #f39c12; font-size: 20px;">üéÆ WOODCOIN Games</h3>
    <p style="font-size: 14px; line-height: 1.6; color: #fff;">
    <b>WOODCOIN21</b> ‚Äì A fast-paced blackjack-style game. Play for free or with real WOOD in multiplayer mode. Private rooms, strategy, and üî• rewards.<br><br>
    <b>Don't Get Mad, WOOD!</b> ‚Äì A web3 remake of the classic board game. Move your pawns, race to win, and collect WOOD with every game. üé≤
    </p>
  </section>

  <section style="margin-top: 40px;">
    <h3 style="color: #00ffff; font-size: 20px;">üìÖ WOODCOIN Roadmap</h3>
    <ul style="font-size: 14px; text-align: left; max-width: 600px; margin: 0 auto; color: #fff;">
      <li>‚úÖ Presale V1‚ÄìV2 (Testnet)</li>
      <li>‚úÖ Presale V3 (50,000 WOOD / BNB)</li>
      <li>üîú WOODCOIN21 ‚Äì Web3 blackjack game</li>
      <li>üîú Don‚Äôt Get Mad, WOOD! ‚Äì Multiplayer board game</li>
      <li>üîí WOOD listing on DEX (PancakeSwap or similar)</li>
      <li>üîí NFTs, tournaments, and ecosystem expansion</li>
    </ul>
  </section>

  <script>
    const saleAddress = "0x7cebc99b114138152D54589BaF6a386b5435f4d0";

    if (typeof window.web3 === 'undefined') {
      window.web3 = new Web3('https://bsc-dataseed.binance.org/');
    }

    async function connectWallet() {
      if (typeof window.ethereum === 'undefined') {
        document.getElementById('warningMsg').innerText = '‚ùå Wallet not detected.';
        return;
      }

      window.web3 = new Web3(window.ethereum);

      try {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [{
            chainId: '0x38',
            chainName: 'Binance Smart Chain',
            rpcUrls: ['https://bsc-dataseed.binance.org/'],
            nativeCurrency: {
              name: 'BNB',
              symbol: 'BNB',
              decimals: 18
            },
            blockExplorerUrls: ['https://bscscan.com']
          }]
        });

        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        userWallet = accounts[0];
        document.getElementById('walletAddress').innerText = 'Wallet: ' + userWallet;
        updateProgress();
      } catch (err) {
        document.getElementById('statusMsg').innerText = '‚ùå Wallet connection failed.';
      }
    }

    async function addToken() {
      try {
        const wasAdded = await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0x5c96991B2EB50924348eCcf3bBB97cDc0a83466E',
              symbol: 'WOOD',
              decimals: 18,
            },
          },
        });

        if (wasAdded) {
          console.log('WOODCOIN added to wallet!');
        }
      } catch (error) {
        console.error('Add token error:', error);
      }
    }

    async function buyWoodcoin() {
      if (!userWallet) {
        alert("Please connect your wallet first.");
        return;
      }

      const txn = {
        from: userWallet,
        to: saleAddress
        // User will input amount in MetaMask
      };

      try {
        const txHash = await window.ethereum.request({
          method: 'eth_sendTransaction',
          params: [txn],
        });

        
    document.getElementById('statusMsg').innerHTML = `
      <div style='font-size:18px; color:#00ff99;'>
        ‚úÖ Transaction sent!<br>
        üéâ You will receive your WOOD soon.<br>
        <span style='font-size:13px;'>TX Hash: ${txHash}</span>
      </div>
    `;
    
        updateProgress();
      } catch (err) {
        document.getElementById('statusMsg').innerText = '‚ùå Transaction failed or cancelled.';
      }
    }

    async function updateProgress() {
      try {
        const balanceWei = await window.web3.eth.getBalance(saleAddress);
        const balanceBNB = window.web3.utils.fromWei(balanceWei, 'ether');
        const raised = parseFloat(balanceBNB);
        const percent = Math.min((raised / 100) * 100, 100);
        document.getElementById('bnbRaisedText').innerText = `üí∞ Raised: ${raised.toFixed(3)} / 100 BNB`;
        document.getElementById('progressBar').style.width = percent + "%";
      } catch (err) {
        console.error("Error fetching balance:", err);
      }
    }

    
let endTime;
const storedTime = localStorage.getItem("woodcoinCountdown");

if (storedTime && parseInt(storedTime) > Date.now()) {
  endTime = parseInt(storedTime);
} else {
  endTime = Date.now() + (14 * 24 * 60 * 60 * 1000);
  localStorage.setItem("woodcoinCountdown", endTime.toString());
}

    const timerEl = document.getElementById('countdown');
    setInterval(() => {
      const now = new Date().getTime();
      const diff = endTime - now;
      if (diff <= 0) {
        timerEl.innerText = "‚õî Tier 1 has ended. Tier 2 coming soon!";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      timerEl.innerText = `‚è≥ ${days}d ${hours}h ${minutes}m ${seconds}s left until price increase (+7%)`;
    }, 1000);

    window.addEventListener("load", updateProgress);
  </script>

  <div style="margin-top:60px; font-size:13px; color:gray;">
    <a href="#" onclick="document.getElementById('termsModal').style.display='flex'; return false;" style="color:#ccc;">Terms & Conditions</a>
  </div>

  <div id="termsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.95); color:white; display:flex; align-items:center; justify-content:center; z-index:9999;">
    <div style="max-width:90%; background:#111; padding:20px 25px; border-radius:10px; text-align:left;">
      <h2 style="text-align:center;">Terms & Conditions</h2>
      <p style="font-size:14px; line-height:1.6;">
        WOODCOIN is a utility token used within the WOOD ecosystem.<br><br>
        It does not represent ownership, investment, or any form of profit guarantee.<br><br>
        By participating in this pre-sale, you accept the risks of interacting with Web3 tokens, and understand that all transactions are final.<br><br>
        Always do your own research (DYOR) and never invest more than you can afford to lose. üî•
      </p>
      <div style="text-align:center;">
        <button onclick="document.getElementById('termsModal').style.display='none';" style="margin-top:20px; padding:10px 20px; font-size:16px;">Close</button>
      </div>
    </div>
  </div>

</body>

</html>
