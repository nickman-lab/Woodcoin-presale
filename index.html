
<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WOODCOIN Pre-Sale</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body {
      background: #000;
      color: #f1c40f;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px 20px;
    }
    button {
      margin-top: 20px;
      padding: 15px 25px;
      background: #2980b9;
      color: #fff;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .wallet-status, .warning, .timer, .message {
      margin-top: 20px;
      font-size: 16px;
    }
    .progress-container {
      margin-top: 30px;
      width: 80%;
      background-color: #333;
      border-radius: 10px;
      margin-left: auto;
      margin-right: auto;
      height: 25px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background-color: #27ae60;
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    .note {
      font-size: 14px;
      margin-top: 5px;
      color: #ccc;
    }
    a {
      color: #ccc;
    }
  </style>

<script>
async function connectWallet() {
    if (typeof window.ethereum !== 'undefined') {
        try {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            document.getElementById("walletStatus").innerText = "Wallet: " + accounts[0];
        } catch (error) {
            alert("Connection failed: " + error.message);
        }
    } else {
        // Redirect to wallet download page (e.g. MetaMask or BestWallet)
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
        if (/android/i.test(userAgent)) {
            window.location.href = "https://play.google.com/store/apps/details?id=io.metamask";
        } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
            window.location.href = "https://apps.apple.com/app/metamask/id1438144202";
        } else {
            window.location.href = "https://metamask.io/download/";
        }
    }
}
</script>

</head>
\1

  <!-- Wallet Status Badge -->
  <div id="wallet-status" style="position: fixed; top: 10px; right: 10px; background-color: #222; color: #0f0; padding: 6px 12px; border-radius: 10px; font-weight: 700; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; display: none; z-index: 9999; box-shadow: 0 2px 10px rgba(0,0,0,0.3); letter-spacing: 0.2px;">
    W ‚úî Connected
  </div>

  <!-- Add BNB Smart Chain Button -->
  <button id="add-bsc-btn" style="position: fixed; top: 54px; right: 10px; background-color: #f0b90b; color: #111; padding: 8px 12px; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; display: inline-block; z-index: 9999; box-shadow: 0 2px 10px rgba(0,0,0,0.25);">
    + Add BNB Smart Chain
  </button>


  <h1>üî• WOODCOIN Pre-Sale</h1>
  <p style="margin-top: 10px; color: #ffd700; font-size: 16px;">
    WOODCOIN is a Play-to-Earn token that fuels the WOOD ecosystem.<br>
    Earn it. Use it. Burn it. üî•
  </p>

  <h2>Buy now: 50,000 WOOD per 1 BNB</h2>

  
    <div class="timer" id="countdown">‚è≥ Loading timer...</div>
    
        
<div id="woodInfo" style="margin-top: 5px; font-size: 14px; color: #ccc;">
  ü™ô WOOD Distributed: -- WOOD<br>
  üíµ 1 WOOD = $0.005
</div>

    <div id="bnbValue" style="margin-top: 5px; font-size: 14px; color: #ccc;">‚âà -- USD raised</div>
        <div id="bnbPrice"
         style="margin-top: 10px; font-size: 15px; color: #fff;">BNB Price: $--</div>
    <script>
      async function getBNBPrice() {
        try {
          const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd");
          const data = await res.json();
          const price = data.binancecoin.usd;
          
        
document.getElementById("bnbPrice").innerText = "BNB Price: $" + price.toFixed(2);

try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";
  } else {
    
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

  }
} catch (e) {
  
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

}

        try {
          const raisedText = document.getElementById("bnbRaisedText").innerText;
          const raisedBNB = parseFloat(raisedText.split(":")[1]);
          const usdValue = (raisedBNB * price).toFixed(2);
          document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";
        } catch (e) {
          
try {
  const raisedText = document.getElementById("bnbRaisedText")?.innerText;
  const match = raisedText?.match(/\d+(\.\d+)?/);
  if (match && match[0]) {
    const raisedBNB = parseFloat(match[0]);
    const usdValue = (raisedBNB * price).toFixed(2);
    document.getElementById("bnbValue").innerText = "‚âà $" + usdValue + " raised";

    // Calcul WOOD distribuit (1 WOOD = 0.005 USD)
    const woodAmount = Math.floor(usdValue / 0.005);
    document.getElementById("woodInfo").innerHTML = `
      ü™ô WOOD Distributed: ${woodAmount.toLocaleString()} WOOD<br>
      üíµ 1 WOOD = $0.005
    `;
  } else {
    document.getElementById("bnbValue").innerText = "‚âà $-- raised";
  }
} catch (e) {
  document.getElementById("bnbValue").innerText = "‚âà $-- raised";
}

        }
        
        } catch (err) {
          console.error("CoinGecko API error:", err);
        }
      }
      getBNBPrice();
      setInterval(getBNBPrice, 30000); // actualizeazƒÉ la 30 secunde
    </script>
    

  <div class="wallet-status" id="walletAddress"><span id="wallet-address" style="color:yellow;">Wallet: Not connected</span><br><span id="wallet-address" style="color:#00ff00;"></span></div>
  <button onclick="connectWallet()">Connect Wallet</button>
<div style="margin-top: 10px;">
  <a href="https://metamask.io/download/" target="_blank">
    <button style="background: orange; color: black; font-weight: bold;">üîΩ Download MetaMask</button>
  </a>
</div>

  <br/>
  <button onclick="addToken()">Add WOODCOIN to Wallet</button>
  <button type="button" id="buy-btn" onclick="buyWoodcoin()" style="background:#555;color:#999;cursor:not-allowed;">Buy Now</button>
<br>
<input type="number" id="bnbAmount" placeholder="Enter BNB amount" 
style="margin-top: 10px; padding: 10px; font-size: 16px; border-radius: 8px; width: 80%; max-width: 300px;">


  <div class="message" id="statusMsg"></div>
  <div class="warning" id="warningMsg" style="color:red;"></div>

  <div id="progressSection">
    <p id="bnbRaisedText">üí∞ Raised: -- / 100 BNB</p>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="note">Live balance from BSC Mainnet</div>
    <p class="note">
      Sale Contract:
      <a href="https://bscscan.com/address/0x7cebc99b114138152D54589BaF6a386b5435f4d0" target="_blank">0x7ceb...f4d0</a>
    </p>
  </div>

  <section style="margin-top: 40px;">
    <h3 style="color: #f39c12; font-size: 20px;">üéÆ WOODCOIN Games</h3>
    <p style="font-size: 14px; line-height: 1.6; color: #fff;">
    <b>WOODCOIN21</b> ‚Äì A fast-paced blackjack-style game. Play for free or with real WOOD in multiplayer mode. Private rooms, strategy, and üî• rewards.<br><br>
    <b>Don't Get Mad, WOOD!</b> ‚Äì A web3 remake of the classic board game. Move your pawns, race to win, and collect WOOD with every game. üé≤
    </p>
  </section>

  <section style="margin-top: 40px;">
    <h3 style="color: #00ffff; font-size: 20px;">üìÖ WOODCOIN Roadmap</h3>
    <ul style="font-size: 14px; text-align: left; max-width: 600px; margin: 0 auto; color: #fff;">
      <li>‚úÖ Presale V1‚ÄìV2 (Testnet)</li>
      <li>‚úÖ Presale V3 (50,000 WOOD / BNB)</li>
      <li>üîú WOODCOIN21 ‚Äì Web3 blackjack game</li>
      <li>üîú Don‚Äôt Get Mad, WOOD! ‚Äì Multiplayer board game</li>
      <li>üîí WOOD listing on DEX (PancakeSwap or similar)</li>
      <li>üîí NFTs, tournaments, and ecosystem expansion</li>
    </ul>
  </section>

  <script>
    const saleAddress = "0x7cebc99b114138152D54589BaF6a386b5435f4d0";

    if (typeof window.web3 === 'undefined') {
      window.web3 = new Web3('https://bsc-dataseed.binance.org/');
    }

    async function connectWallet() {
      if (typeof window.ethereum === 'undefined') {
        document.getElementById('warningMsg').innerText = '‚ùå Wallet not detected.';
        return;
      }

      window.web3 = new Web3(window.ethereum);

      try {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [{
            chainId: '0x38',
            chainName: 'Binance Smart Chain',
            rpcUrls: ['https://bsc-dataseed.binance.org/'],
            nativeCurrency: {
              name: 'BNB',
              symbol: 'BNB',
              decimals: 18
            },
            blockExplorerUrls: ['https://bscscan.com']
          }]
        });

        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        userWallet = accounts[0];
        document.getElementById('walletAddress').innerText = 'Wallet: ' + userWallet;
        updateProgress();
      } catch (err) {
        document.getElementById('statusMsg').innerText = '‚ùå Wallet connection failed.';
      }
    }

    async function addToken() {
      try {
        const wasAdded = await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0x5c96991B2EB50924348eCcf3bBB97cDc0a83466E',
              symbol: 'WOOD',
              decimals: 18,
            },
          },
        });

        if (wasAdded) {
          console.log('WOODCOIN added to wallet!');
        }
      } catch (error) {
        console.error('Add token error:', error);
      }
    }

    async function buyWoodcoin() {
      if (!userWallet) {
        alert("Please connect your wallet first.");
        return;
      }

      const txn = {
        from: userWallet,
        to: saleAddress
        // User will input amount in MetaMask
      };

      try {
        const txHash = await window.ethereum.request({
          method: 'eth_sendTransaction',
          params: [txn],
        });

        
    document.getElementById('statusMsg').innerHTML = `
      <div style='font-size:18px; color:#00ff99;'>
        ‚úÖ Transaction sent!<br>
        üéâ You will receive your WOOD soon.<br>
        <span style='font-size:13px;'>TX Hash: ${txHash}</span>
      </div>
    `;
    
        updateProgress();
      } catch (err) {
        document.getElementById('statusMsg').innerText = '‚ùå Transaction failed or cancelled.';
      }
    }

    async function updateProgress() {
      try {
        const balanceWei = await window.web3.eth.getBalance(saleAddress);
        const balanceBNB = window.web3.utils.fromWei(balanceWei, 'ether');
        const raised = parseFloat(balanceBNB);
        const percent = Math.min((raised / 100) * 100, 100);
        document.getElementById('bnbRaisedText').innerText = `üí∞ Raised: ${raised.toFixed(3)} / 100 BNB`;
        document.getElementById('progressBar').style.width = percent + "%";
      } catch (err) {
        console.error("Error fetching balance:", err);
      }
    }

    
let endTime;
const storedTime = localStorage.getItem("woodcoinCountdown");

if (storedTime && parseInt(storedTime) > Date.now()) {
  endTime = parseInt(storedTime);
} else {
  endTime = Date.now() + (14 * 24 * 60 * 60 * 1000);
  localStorage.setItem("woodcoinCountdown", endTime.toString());
}

    const timerEl = document.getElementById('countdown');
    setInterval(() => {
      const now = new Date().getTime();
      const diff = endTime - now;
      if (diff <= 0) {
        timerEl.innerText = "‚õî Tier 1 has ended. Tier 2 coming soon!";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      timerEl.innerText = `‚è≥ ${days}d ${hours}h ${minutes}m ${seconds}s left until price increase (+7%)`;
    }, 1000);

    window.addEventListener("load", updateProgress);
  </script>

  <div style="margin-top:60px; font-size:13px; color:gray;">
    <a href="#" onclick="document.getElementById('termsModal').style.display='flex'; return false;" style="color:#ccc;">Terms & Conditions</a>
  </div>

  <div id="termsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.95); color:white; display:flex; align-items:center; justify-content:center; z-index:9999;">
    <div style="max-width:90%; background:#111; padding:20px 25px; border-radius:10px; text-align:left;">
      <h2 style="text-align:center;">Terms & Conditions</h2>
      <p style="font-size:14px; line-height:1.6;">
        WOODCOIN is a utility token used within the WOOD ecosystem.<br><br>
        It does not represent ownership, investment, or any form of profit guarantee.<br><br>
        By participating in this pre-sale, you accept the risks of interacting with Web3 tokens, and understand that all transactions are final.<br><br>
        Always do your own research (DYOR) and never invest more than you can afford to lose. üî•
      </p>
      <div style="text-align:center;">
        <button onclick="document.getElementById('termsModal').style.display='none';" style="margin-top:20px; padding:10px 20px; font-size:16px;">Close</button>
      </div>
    </div>
  </div>


<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script>
const SALE_ADDRESS = "0x7cebc99b114138152D54589BaF6a386b5435f4d0";
const TOKEN_ADDRESS = "0x5c96991B2EB50924348eCcf3bBB97cDc0a83466E";
const ABI = [{
  "inputs": [{"internalType":"address","name":"beneficiary","type":"address"}],
  "name":"buyTokens",
  "outputs":[],
  "stateMutability":"payable",
  "type":"function"
}];

let userAddress = null;

async function connectWallet() {
  if (!window.ethereum) {
    alert("MetaMask not detected!");
    return;
  }

  const chainId = await ethereum.request({ method: 'eth_chainId' });
  if (chainId !== '0x38') {
    try {
      await ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: '0x38' }]
      });
    } catch (switchErr) {
      await ethereum.request({
        method: 'wallet_addEthereumChain',
        params: [{
          chainId: '0x38',
          chainName: 'Binance Smart Chain',
          rpcUrls: ['https://bsc-dataseed.binance.org/'],
          nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
          blockExplorerUrls: ['https://bscscan.com']
        }]
      });
    }
  }

  const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
  userAddress = accounts[0];
  document.getElementById('walletAddress').innerText = 'Wallet: ' + userAddress;
}

async function addToken() {
  if (!window.ethereum) return;
  try {
    await ethereum.request({
      method: 'wallet_watchAsset',
      params: {
        type: 'ERC20',
        options: {
          address: TOKEN_ADDRESS,
          symbol: 'WOOD',
          decimals: 18,
        },
      },
    });
  } catch (err) {
    console.error('Add token error:', err);
  }
}

async function buyTokens() {
  if (!userAddress) {
    alert("Connect your wallet first!");
    return;
  }

  const amount = prompt("Enter amount of BNB to spend:");
  if (!amount || isNaN(amount)) return;

  const web3 = new Web3(window.ethereum);
  const contract = new web3.eth.Contract(ABI, SALE_ADDRESS);
  const value = web3.utils.toWei(amount, 'ether');

  contract.methods.buyTokens(userAddress).send({
    from: userAddress,
    value
  })
  .on("transactionHash", function(hash){
    alert("Transaction sent: " + hash);
  })
  .on("receipt", function(receipt){
    alert("‚úÖ Transaction confirmed!");
  })
  .on("error", function(err){
    alert("‚ùå Transaction failed");
  });
}
</script>


<script>
  async function connectWallet() {
    if (typeof window.ethereum !== "undefined") {
      try {
        await window.ethereum.request({ method: "eth_requestAccounts" });
        document.getElementById("wallet-status").textContent = "‚úÖ Wallet connected";
      } catch (error) {
        alert("Wallet connection failed.");
      }
    } else {
      alert("MetaMask not detected! Please open this page in MetaMask, Trust Wallet, BestWallet or TokenPocket.");
      window.location.href = "https://metamask.app.link/dapp/woodcoin-presale.vercel.app";
    }
  }

  async function addToken() {
    if (typeof window.ethereum !== "undefined") {
      try {
        await window.ethereum.request({
          method: "wallet_watchAsset",
          params: {
            type: "ERC20",
            options: {
              address: "0x5c96991B2EB50924348eCcf3bBB97cDc0a83466E",
              symbol: "WOOD",
              decimals: 18,
              image: "https://woodcoin.vercel.app/wood-logo.png"
            },
          },
        });
      } catch (error) {
        alert("Could not add token.");
      }
    } else {
      alert("Please use MetaMask or supported Web3 wallet.");
    }
  }

  window.onload = function () {
    const connectBtn = document.getElementById("connect-wallet");
    const addBtn = document.getElementById("add-woodcoin");

    if (connectBtn) connectBtn.onclick = connectWallet;
    if (addBtn) addBtn.onclick = addToken;
  };
</script>




<script>
async function updateWalletStatus() {
  if (typeof window.ethereum !== 'undefined') {
    try {
      const accounts = await window.ethereum.request({ method: 'eth_accounts' });
      if (accounts.length > 0) {
        const walletAddress = accounts[0];
        document.getElementById("wallet-address").innerText = "Wallet: " + walletAddress;
      }
    } catch (err) {
      console.error("Error fetching wallet:", err);
    }
  }
}

window.addEventListener('load', updateWalletStatus);
</script>


  



<script>
(function(){
  function showToast(msg){
    var t = document.getElementById('toast-box');
    if(!t) return alert(msg);
    t.textContent = msg;
    t.style.display = 'block';
    setTimeout(function(){ t.style.display = 'none'; }, 3500);
  }

  const CANDIDATES = [
    "buyTokens",
    "buy",
    "purchase",
    "contribute",
    "invest",
    "buyWOOD"
  ];

  function parseBNB(val){
    try { return ethers.utils.parseEther(String(val)); } catch(e){ return null; }
  }

  async function ensureProvider(){
    if(!(window.ethereum && window.ethereum.request)){
      alert("Please install MetaMask or a compatible wallet.");
      return null;
    }
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    return provider;
  }

  // Replace/globalize buyWoodcoin
  window.buyWoodcoin = async function(){
    const input = document.getElementById("bnbAmount");
    const amount = input ? input.value : "";
    if(!amount || Number(amount) <= 0){ alert("Enter a valid BNB amount."); return; }

    const provider = await ensureProvider(); if(!provider) return;
    const signer = provider.getSigner();

    // Ensure BSC mainnet
    try{
      const chainId = await provider.send("eth_chainId", []);
      if(chainId !== "0x38"){
        try{ await provider.send("wallet_switchEthereumChain", [{ chainId: "0x38" }]); }
        catch(e){ /* user may reject; continue */ }
      }
    }catch(e){}

    // Build contract with candidate ABIs dynamically
    const candidateAbis = CANDIDATES.map(name => [`function ${name}() payable`]);
    const valueWei = parseBNB(amount);
    if(!valueWei){ alert("Invalid amount."); return; }

    // Try methods with estimateGas as probe
    let chosen = null, methodName = null;
    for(const abi of candidateAbis){
      const name = abi[0].match(/function\s+(\w+)/)[1];
      try{
        const c = new ethers.Contract(SALE_ADDRESS, abi, signer);
        if(c.estimateGas && c.estimateGas[name]){
          await c.estimateGas[name]({ value: valueWei });
          chosen = c; methodName = name;
          break;
        }
      }catch(err){
        // continue trying the next method
      }
    }

    try{
      let tx;
      if(chosen && methodName){
        tx = await chosen[methodName]({ value: valueWei, gasLimit: 300000 });
      }else{
        // Fallback to payable receive()
        tx = await signer.sendTransaction({ to: SALE_ADDRESS, value: valueWei, gasLimit: 300000 });
      }
      showToast("Transaction sent!");
      alert("Transaction sent! TX Hash: " + tx.hash);
    }catch(err){
      console.error(err);
      alert("Transaction failed: " + (err && err.message ? err.message : err));
    }
  };

  // Enable/disable button bound by onclick, based on #bnbAmount
  document.addEventListener("DOMContentLoaded", function(){
    const input = document.getElementById("bnbAmount");
    const btn = document.querySelector('button[onclick="buyWoodcoin()"]');
    function refresh(){
      const val = input ? parseFloat(input.value) : NaN;
      if(!isNaN(val) && val > 0){
        if(btn){ btn.disabled = false; btn.style.background="#f0b90b"; btn.style.color="#111"; btn.style.cursor="pointer"; }
      }else{
        if(btn){ btn.disabled = true; btn.style.background="#555"; btn.style.color="#999"; btn.style.cursor="not-allowed"; }
      }
    }
    if(input){
      input.addEventListener("input", refresh);
      refresh();
    }
  });
})();
</script>

<script>
(function(){
  function getBuyBtn(){
    return document.getElementById('buy-btn') || document.querySelector('button[onclick="buyWoodcoin()"]') || Array.from(document.querySelectorAll('button')).find(b => /buy now/i.test(b.textContent || ''));
  }
  function getAmountInput(){
    return document.getElementById('bnbAmount') || document.querySelector('input[type="number"]#bnbAmount') || document.querySelector('input[type="number"]');
  }
  function setEnabled(enabled){
    var btn = getBuyBtn();
    if(!btn) return;
    btn.disabled = !enabled;
    if(enabled){
      btn.style.background = "#f0b90b";
      btn.style.color = "#111";
      btn.style.cursor = "pointer";
    }else{
      btn.style.background = "#555";
      btn.style.color = "#999";
      btn.style.cursor = "not-allowed";
    }
  }
  function refresh(){
    var input = getAmountInput();
    var val = input ? parseFloat(input.value) : NaN;
    setEnabled(!isNaN(val) && val > 0);
  }
  document.addEventListener('DOMContentLoaded', function(){
    var input = getAmountInput();
    if(input){
      input.addEventListener('input', refresh);
      input.addEventListener('change', refresh);
    }
    refresh();
  });
  // Periodic safety check in case DOM re-renders
  setInterval(refresh, 2000);
})();
</script>

<script>
(function(){
  function bindBuyClick(){
    if(window._wc_buy_click_bound) return;
    var btn = document.getElementById('buy-btn') || document.querySelector('button[onclick="buyWoodcoin()"]');
    if(!btn) return;
    btn.addEventListener('click', function(ev){
      try{
        ev.preventDefault(); ev.stopPropagation();
      }catch(e){}
      if(typeof buyWoodcoin === 'function'){
        console.log('[WOODCOIN] Buy button clicked');
        buyWoodcoin();
      }else{
        alert('Action not ready. Please reload the page.');
        console.warn('[WOODCOIN] buyWoodcoin() not found');
      }
    }, { passive:false });
    window._wc_buy_click_bound = true;
  }
  document.addEventListener('DOMContentLoaded', bindBuyClick);
  // Safety rebind if DOM changes
  setInterval(bindBuyClick, 1500);
})();
</script>
</body>

</html>
